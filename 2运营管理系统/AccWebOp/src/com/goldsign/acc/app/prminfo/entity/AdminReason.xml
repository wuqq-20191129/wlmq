<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goldsign.acc.app.prminfo.mapper.AdminReasonMapper">
  <resultMap id="BaseResultMap" type="com.goldsign.acc.app.prminfo.entity.AdminReason">
    <constructor>
      <idArg column="ADMIN_MANAGER_ID" javaType="java.lang.String" jdbcType="CHAR" />
      <idArg column="RECORD_FLAG" javaType="java.lang.String" jdbcType="CHAR" />
      <idArg column="VERSION_NO" javaType="java.lang.String" jdbcType="CHAR" />
      <arg column="ADMIN_MANAGER_NAME" javaType="java.lang.String" jdbcType="VARCHAR" />
    </constructor>
  </resultMap>
  <sql id="Base_Column_List">
    ADMIN_MANAGER_ID, RECORD_FLAG, VERSION_NO, ADMIN_MANAGER_NAME
  </sql>
  <select id="selectByPrimaryKey" parameterType="com.goldsign.acc.app.prminfo.entity.AdminReason" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from W_ACC_ST.W_OP_PRM_ADMIN_REASON
    where ADMIN_MANAGER_ID = #{adminManagerId,jdbcType=CHAR}
      and RECORD_FLAG = #{recordFlag,jdbcType=CHAR}
      and VERSION_NO = #{versionNo,jdbcType=CHAR}
  </select>
  <select id="selectAdminReasons" parameterType="com.goldsign.acc.app.prminfo.entity.AdminReason" resultMap="BaseResultMap">
    select 
    <include refid="Base_Column_List" />
    from W_ACC_ST.W_OP_PRM_ADMIN_REASON
    where 1=1
    <if test="adminManagerId !=null and adminManagerId !=''">
        and ADMIN_MANAGER_ID = #{adminManagerId,jdbcType=CHAR}
    </if>
    <if test="adminManagerName !=null and adminManagerName !=''">
        and ADMIN_MANAGER_NAME like '%${adminManagerName}%'
    </if>
    <if test="versionNo !=null and versionNo !=''">
        and VERSION_NO = #{versionNo,jdbcType=CHAR}
    </if>
    <if test="recordFlag !=null and recordFlag !=''">
        and RECORD_FLAG = #{recordFlag,jdbcType=CHAR}
    </if>
  </select>
  <delete id="deleteByPrimaryKey" parameterType="com.goldsign.acc.app.prminfo.entity.AdminReason">
    delete from W_ACC_ST.W_OP_PRM_ADMIN_REASON
    where ADMIN_MANAGER_ID = #{adminManagerId,jdbcType=CHAR}
      and RECORD_FLAG = #{recordFlag,jdbcType=CHAR}
      and VERSION_NO = #{versionNo,jdbcType=CHAR}
  </delete>
  <insert id="insert" parameterType="com.goldsign.acc.app.prminfo.entity.AdminReason">
    insert into W_ACC_ST.W_OP_PRM_ADMIN_REASON (ADMIN_MANAGER_ID, RECORD_FLAG, VERSION_NO, 
      ADMIN_MANAGER_NAME)
    values (#{adminManagerId,jdbcType=CHAR}, #{recordFlag,jdbcType=CHAR}, #{versionNo,jdbcType=CHAR}, 
      #{adminManagerName,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.goldsign.acc.app.prminfo.entity.AdminReason">
    insert into W_ACC_ST.W_OP_PRM_ADMIN_REASON
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="adminManagerId != null">
        ADMIN_MANAGER_ID,
      </if>
      <if test="recordFlag != null">
        RECORD_FLAG,
      </if>
      <if test="versionNo != null">
        VERSION_NO,
      </if>
      <if test="adminManagerName != null">
        ADMIN_MANAGER_NAME,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="adminManagerId != null">
        #{adminManagerId,jdbcType=CHAR},
      </if>
      <if test="recordFlag != null">
        #{recordFlag,jdbcType=CHAR},
      </if>
      <if test="versionNo != null">
        #{versionNo,jdbcType=CHAR},
      </if>
      <if test="adminManagerName != null">
        #{adminManagerName,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.goldsign.acc.app.prminfo.entity.AdminReason">
    update W_ACC_ST.W_OP_PRM_ADMIN_REASON
    <set>
      <if test="adminManagerName != null">
        ADMIN_MANAGER_NAME = #{adminManagerName,jdbcType=VARCHAR},
      </if>
    </set>
    where ADMIN_MANAGER_ID = #{adminManagerId,jdbcType=CHAR}
      and RECORD_FLAG = #{recordFlag,jdbcType=CHAR}
      and VERSION_NO = #{versionNo,jdbcType=CHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.goldsign.acc.app.prminfo.entity.AdminReason">
    update W_ACC_ST.W_OP_PRM_ADMIN_REASON
    set ADMIN_MANAGER_NAME = #{adminManagerName,jdbcType=VARCHAR}
    where ADMIN_MANAGER_ID = #{adminManagerId,jdbcType=CHAR}
      and RECORD_FLAG = #{recordFlag,jdbcType=CHAR}
      and VERSION_NO = #{versionNo,jdbcType=CHAR}
  </update>
  <!--当前参数、未来参数作历史标识或删除标识 -->
  <update id="submitToOldFlag" parameterType="PrmVersion" >
      update W_ACC_ST.W_OP_PRM_ADMIN_REASON set record_flag=#{record_flag_old}
      where record_flag=#{record_flag_new}                                               
  </update>
  <!--草稿参数复制为当前或未来参数 -->
  <insert id="submitFromDraftToCurOrFur" parameterType="PrmVersion" >
      insert into W_ACC_ST.W_OP_PRM_ADMIN_REASON(ADMIN_MANAGER_ID, RECORD_FLAG, VERSION_NO, ADMIN_MANAGER_NAME)
      select ADMIN_MANAGER_ID, #{record_flag_new}, #{version_no_new}, ADMIN_MANAGER_NAME
      from W_ACC_ST.W_OP_PRM_ADMIN_REASON
      where record_flag=#{record_flag} and version_no=#{version_no}                                   
  </insert>
  <!--草稿参数删除 -->
  <delete id="deleteDeviceTypesForClone" parameterType="PrmVersion">
      delete from W_ACC_ST.W_OP_PRM_ADMIN_REASON where record_flag='3' and version_no='0000000000'                                                      
  </delete>
  <!--当前参数或未来参数克隆为草稿参数 -->
  <insert id="cloneFromCurOrFurToDraft" parameterType="PrmVersion" >
      insert into W_ACC_ST.W_OP_PRM_ADMIN_REASON(ADMIN_MANAGER_ID, RECORD_FLAG, VERSION_NO, ADMIN_MANAGER_NAME)
      select ADMIN_MANAGER_ID, '3', '0000000000', ADMIN_MANAGER_NAME
      from W_ACC_ST.W_OP_PRM_ADMIN_REASON
      where record_flag=#{record_flag} and version_no=#{version_no}
  </insert>
</mapper>