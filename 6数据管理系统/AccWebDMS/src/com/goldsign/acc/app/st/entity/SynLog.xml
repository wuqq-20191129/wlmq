<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goldsign.acc.app.st.mapper.SynLogMapper">
    <resultMap type="SynLog" id="rmSynLog">
        <result column="src_db" property="src_db" /> 
        <result column="src_table" property="src_table" /> 
        <result column="dest_db" property="dest_db" /> 
        <result column="dest_table" property="dest_table" /> 
        <result column="syn_time" property="syn_time" /> 
        <result column="status" property="status" /> 
        <result column="nums" property="nums" /> 
        <result column="remark" property="remark" /> 
        <result column="start_syn_time" property="start_syn_time" /> 
        <result column="end_syn_time" property="end_syn_time" /> 
    </resultMap>
    
    <select id="queryPlan"  parameterType="SynLog" resultMap="rmSynLog">
        select src_db,src_table,dest_db,dest_table,
                syn_time,status,nums,remark
        from w_acc_st.w_op_dm_syn_log where 1=1 
        <if test="src_table != null and src_table !=''" >  
            and src_table like concat(concat('%',#{src_table}),'%')
        </if> 
        <if test="dest_table != null and dest_table !=''" >  
            and dest_table like concat(concat('%',#{dest_table}),'%') 
        </if> 
        <if test="start_syn_time != null and start_syn_time !=''" >  
            and syn_time &gt;= to_date(#{start_syn_time},'yyyy-MM-dd HH24:mi:ss') 
        </if> 
        <if test="end_syn_time != null and end_syn_time !=''" >  
            and syn_time &lt;= to_date(#{end_syn_time},'yyyy-MM-dd HH24:mi:ss') 
        </if> 
    </select>
    
    
</mapper>


