<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.goldsign.acc.app.basicinfo.mapper.TicketStorageCardSubTypeManageMapper">
    <resultMap type="TicketStorageCardSubTypeManage" id="rmTicketStorageCardSubTypeManage">
        
        <result column="ic_main_type" property="ic_main_type" /> 
        <result column="ic_main_desc" property="ic_main_desc" />
        <result column="ic_sub_type" property="ic_sub_type" /> 
        <result column="ic_sub_desc" property="ic_sub_desc" />
    </resultMap>
     
    <select id="getTicketStorageCardSubTypeManage"  parameterType="TicketStorageCardSubTypeManage" resultMap="rmTicketStorageCardSubTypeManage">
        select ic_main_type,ic_main_desc,ic_sub_type,ic_sub_desc  from  W_ACC_TK.W_IC_COD_CARD_MAIN_TYPE natural join W_ACC_TK.W_IC_COD_CARD_SUB_TYPE where 1=1
        <if test="ic_main_type !=null and ic_main_type !=''">
            and ic_main_type =#{ic_main_type} 
        </if>
        <if test="ic_sub_type !=null and ic_sub_type !=''">
            and ic_sub_type =#{ic_sub_type} 
        </if>
        <if test="ic_sub_desc !=null and ic_sub_desc !=''">
            or ic_sub_desc =#{ic_sub_desc} 
        </if>
        order by to_number(ic_main_type),to_number(ic_sub_type)
    </select>
    
    <select id="getTicketStorageCardSubTypeManageById"  parameterType="TicketStorageCardSubTypeManage" resultMap="rmTicketStorageCardSubTypeManage">
        select ic_main_type,ic_sub_type,ic_sub_desc  from  W_ACC_TK.W_IC_COD_CARD_SUB_TYPE where ic_main_type =#{ic_main_type} and ic_sub_type =#{ic_sub_type}  
    </select>
    
    <select id="getTicketStorageCardSubTypeManageByName"  parameterType="TicketStorageCardSubTypeManage" resultMap="rmTicketStorageCardSubTypeManage">
        select ic_main_type,ic_sub_type,ic_sub_desc  from  W_ACC_TK.W_IC_COD_CARD_SUB_TYPE where  ic_sub_desc =#{ic_sub_desc} 
    </select>    
        
    <select id="getTicketStorageCardSubTypeManageByStock"  parameterType="TicketStorageCardSubTypeManage" resultMap="rmTicketStorageCardSubTypeManage">
        select ic_main_type,ic_sub_type  from  W_ACC_TK.W_IC_STS_AREA_CARD  where card_num>0  and  ic_main_type=#{ic_main_type}  and  ic_sub_type=#{ic_sub_type} 
    </select>
    
    <select id="getTicketStorageCardSubTypeManageByContras"  parameterType="TicketStorageCardSubTypeManage" resultMap="rmTicketStorageCardSubTypeManage">
        select * from  W_ACC_TK.W_IC_COD_CARD_TYPE_CONTRAST where ic_main_type =#{ic_main_type} and ic_sub_type =#{ic_sub_type}
    </select>
    
    <select id="getTicketStorageCardSubTypeManageByChest"  parameterType="TicketStorageCardSubTypeManage" resultMap="rmTicketStorageCardSubTypeManage">
        select * from  W_ACC_TK.W_IC_COD_CHEST where ic_main_type =#{ic_main_type} and ic_sub_type =#{ic_sub_type}
    </select>
        
    <select id="getTicketStorageCardSubTypeManageByDefinition"  parameterType="TicketStorageCardSubTypeManage" resultMap="rmTicketStorageCardSubTypeManage">
        select ic_main_type,ic_sub_type,ic_sub_desc  from  W_ACC_TK.W_IC_COD_CARD_SUB_TYPE where  ic_sub_desc =#{ic_sub_desc} 
        <if test="ic_main_type !=null and ic_main_type !=''">
            and ic_main_type =#{ic_main_type} 
        </if>  
        <if test="ic_sub_type !=null and ic_sub_type !=''">
            and ic_sub_type =#{ic_sub_type}
        </if>
    </select>
    
    <insert id="addTicketStorageCardSubTypeManage" parameterType="TicketStorageCardSubTypeManage" >
        insert into W_ACC_TK.W_IC_COD_CARD_SUB_TYPE(ic_main_type,ic_sub_type,ic_sub_desc) values(#{ic_main_type},#{ic_sub_type},#{ic_sub_desc})               
    </insert>
    
    <update id="modifyTicketStorageCardSubTypeManage" parameterType="TicketStorageCardSubTypeManage" >
        update W_ACC_TK.W_IC_COD_CARD_SUB_TYPE set ic_sub_desc =#{ic_sub_desc}  where ic_main_type =#{ic_main_type} and ic_sub_type =#{ic_sub_type}                                                 
    </update>
    
    <delete id="deleteTicketStorageCardSubTypeManage" parameterType="TicketStorageCardSubTypeManage">
        delete from W_ACC_TK.W_IC_COD_CARD_SUB_TYPE where ic_sub_type =#{ic_sub_type} and ic_main_type =#{ic_main_type} 
    </delete>     
    
</mapper>
